<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artigo - Hermes News</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Estilos específicos para a página de artigo */
        .article-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .article-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }
        
        .full-article {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 2rem;
        }
        
        .full-article h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: #222;
        }
        
        .article-meta {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .article-meta .author {
            font-weight: 600;
            margin-right: 1rem;
        }
        
        .article-meta .date {
            display: flex;
            align-items: center;
        }
        
        .article-meta .date i {
            margin-right: 0.5rem;
        }
        
        .article-meta .category {
            margin-left: auto;
            background-color: #f0f0f0;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .article-meta .category.futebol {
            background-color: #e3f2fd;
            color: #1565c0;
        }
        
        .article-featured-image {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        
        .article-content {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
        }
        
        .article-content p {
            margin-bottom: 1.5rem;
        }
        
        .article-content img {
            max-width: 100%;
            border-radius: 6px;
            margin: 1.5rem 0;
        }
        
        .article-sidebar {
            position: sticky;
            top: 2rem;
        }
        
        .related-articles {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .related-articles h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .related-article-item {
            display: flex;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .related-article-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .related-article-image {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 1rem;
        }
        
        .related-article-content h4 {
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
            line-height: 1.3;
        }
        
        .related-article-content .date {
            font-size: 0.8rem;
            color: #666;
        }
        
        .share-widget {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
        }
        
        .share-widget h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .share-buttons {
            display: flex;
            justify-content: space-between;
        }
        
        .share-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: #fff;
            font-size: 1.2rem;
            transition: transform 0.2s;
        }
        
        .share-button:hover {
            transform: scale(1.1);
        }
        
        .share-button.facebook {
            background-color: #1877f2;
        }
        
        .share-button.twitter {
            background-color: #1da1f2;
        }
        
        .share-button.whatsapp {
            background-color: #25d366;
        }
        
        .share-button.telegram {
            background-color: #0088cc;
        }
        
        .share-button.email {
            background-color: #ea4335;
        }
        
        #article-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            font-size: 1.2rem;
            color: #666;
        }
        
        #article-loading i {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #1565c0;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .article-container {
                grid-template-columns: 1fr;
            }
            
            .full-article {
                padding: 1.5rem;
            }
            
            .full-article h1 {
                font-size: 2rem;
            }
            
            .article-meta {
                flex-wrap: wrap;
            }
            
            .article-meta .category {
                margin-left: 0;
                margin-top: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo">
                <a href="index.html">
                    <img src="hermeslogo.png" alt="Hermes News Logo">
                    <h1>HERMES <span>NEWS</span></h1>
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html">Política</a></li>
                    <li><a href="../index.html">Economia</a></li>
                    <li><a href="../index.html">Tecnologia</a></li>
                    <li><a href="../index.html">Cultura</a></li>
                    <li><a href="index.html">Esportes</a></li>
                </ul>
            </nav>
            <div class="search-container">
                <i class="fas fa-search"></i>
                <button class="subscribe-btn">Assine</button>
            </div>
            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <main class="article-main">
        <div id="article-loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Carregando artigo...</p>
        </div>
        
        <div id="article-container" class="article-container" style="display: none;">
            <!-- Conteúdo do artigo será carregado aqui via JavaScript -->
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="../hermeslogobranco.png" alt="Hermes News Logo">
                <h2>HERMES <span>NEWS</span></h2>
                <p>Notícias rápidas e confiáveis, como as asas de Hermes.</p>
            </div>
            <div class="footer-links">
                <div class="links-column">
                    <h3>Categorias</h3>
                    <ul>
                        <li><a href="../index.html">Política</a></li>
                        <li><a href="../index.html">Economia</a></li>
                        <li><a href="../index.html">Tecnologia</a></li>
                        <li><a href="../index.html">Cultura</a></li>
                        <li><a href="index.html">Esportes</a></li>
                    </ul>
                </div>
                <div class="links-column">
                    <h3>Sobre</h3>
                    <ul>
                        <li><a href="#">Quem somos</a></li>
                        <li><a href="#">Nossa equipe</a></li>
                        <li><a href="contato.html">Contato</a></li>
                        <li><a href="#">Trabalhe conosco</a></li>
                    </ul>
                </div>
                <div class="links-column">
                    <h3>Redes Sociais</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Hermes News. Todos os direitos reservados.</p>
            <div class="legal-links">
                <a href="#">Termos de uso</a>
                <a href="#">Política de privacidade</a>
                <a href="#">Cookies</a>
            </div>
        </div>
    </footer>

    <script type="module">
        import { articleService } from './scripts/firebase-db.js';
        
        const urlParams = new URLSearchParams(window.location.search);
        const articleId = urlParams.get('id');
        const articleContainer = document.getElementById('article-container');
        const loadingIndicator = document.getElementById('article-loading');
        
        async function loadArticle() {
            if (!articleId) {
                showError('ID do artigo não encontrado');
                return;
            }
            
            try {
                const article = await articleService.getArticleById(articleId);
                
                if (article) {
                    // Atualiza o título da página
                    document.title = `${article.title} - Hermes News`;
                    
                    // Conteúdo principal do artigo
                    const mainContent = `
                        <div class="article-content-container">
                            <article class="full-article">
                                <h1>${article.title}</h1>
                                <div class="article-meta">
                                    <span class="author"><i class="fas fa-user"></i> Por ${article.author || 'Redação Esportes'}</span>
                                    <span class="date"><i class="far fa-calendar-alt"></i> ${formatDate(article.createdAt)}</span>
                                    <span class="category ${article.category || 'futebol'}">${getCategoryName(article.category)}</span>
                                </div>
                                ${article.image ? `<img src="${article.image}" alt="${article.title}" class="article-featured-image">` : ''}
                                <div class="article-content">${article.content}</div>
                            </article>
                        </div>
                        <aside class="article-sidebar">
                            <div class="share-widget">
                                <h3><i class="fas fa-share-alt"></i> Compartilhar</h3>
                                <div class="share-buttons">
                                    <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}" target="_blank" class="share-button facebook">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                    <a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(article.title)}" target="_blank" class="share-button twitter">
                                        <i class="fab fa-twitter"></i>
                                    </a>
                                    <a href="https://api.whatsapp.com/send?text=${encodeURIComponent(article.title + ' ' + window.location.href)}" target="_blank" class="share-button whatsapp">
                                        <i class="fab fa-whatsapp"></i>
                                    </a>
                                    <a href="https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(article.title)}" target="_blank" class="share-button telegram">
                                        <i class="fab fa-telegram-plane"></i>
                                    </a>
                                    <a href="mailto:?subject=${encodeURIComponent(article.title)}&body=${encodeURIComponent('Confira este artigo: ' + window.location.href)}" class="share-button email">
                                        <i class="fas fa-envelope"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="related-articles" id="related-articles">
                                <h3><i class="fas fa-newspaper"></i> Leia também</h3>
                                <div id="related-articles-container">
                                    <div class="loading-spinner small">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <p>Carregando artigos relacionados...</p>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    `;
                    
                    articleContainer.innerHTML = mainContent;
                    articleContainer.style.display = 'grid';
                    loadingIndicator.style.display = 'none';
                    
                    // Carrega artigos relacionados
                    loadRelatedArticles(article.id, article.category);
                    
                } else {
                    showError('Artigo não encontrado');
                }
            } catch (error) {
                console.error('Erro ao carregar artigo:', error);
                showError('Erro ao carregar artigo');
            }
        }
        
        async function loadRelatedArticles(currentId, category) {
            try {
                const articles = await articleService.getArticles({
                    publishedOnly: true,
                    category: category || null,
                    limit: 4
                });
                
                const relatedArticles = articles
                    .filter(article => article.id !== currentId)
                    .slice(0, 3);
                
                const relatedContainer = document.getElementById('related-articles-container');
                
                if (relatedArticles.length > 0) {
                    relatedContainer.innerHTML = relatedArticles.map(article => `
                        <div class="related-article-item">
                            <img src="${article.image || 'images/default.jpg'}" alt="${article.title}" class="related-article-image">
                            <div class="related-article-content">
                                <h4><a href="article.html?id=${article.id}">${article.title}</a></h4>
                                <span class="date">${formatDate(article.createdAt)}</span>
                            </div>
                        </div>
                    `).join('');
                } else {
                    relatedContainer.innerHTML = '<p>Nenhum artigo relacionado encontrado</p>';
                }
            } catch (error) {
                console.error('Erro ao carregar artigos relacionados:', error);
                document.getElementById('related-articles-container').innerHTML = 
                    '<p>Não foi possível carregar artigos relacionados</p>';
            }
        }
        
        function showError(message) {
            loadingIndicator.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>${message}</p>
                    <a href="index.html" class="btn-primary">Voltar para a página inicial</a>
                </div>
            `;
        }
        
        function formatDate(dateString) {
            try {
                const options = { day: 'numeric', month: 'long', year: 'numeric' };
                return new Date(dateString).toLocaleDateString('pt-BR', options);
            } catch {
                return '';
            }
        }
        
        function getCategoryName(category) {
            const categories = {
                'futebol': 'Futebol',
                'basquete': 'Basquete',
                'volei': 'Vôlei',
                'tenis': 'Tênis',
                'f1': 'Fórmula 1',
                'outros': 'Outros Esportes'
            };
            return categories[category] || category || 'Esportes';
        }
        
        // Inicializa a página
        document.addEventListener('DOMContentLoaded', loadArticle);
    </script>
</body>
</html>
